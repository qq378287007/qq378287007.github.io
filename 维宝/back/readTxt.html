<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
  <link rel="stylesheet" href="chatbox.css">
</head>

<body>
  <script src="readTxt.js"></script>
  <script>
    // Read a file
    function readTxtFile(fileName) {
      const request = new XMLHttpRequest();
      request.onreadystatechange = function () {
        if (request.readyState === 4 && request.status !== 404) {
          onReadTxtFile(request.responseText, fileName);
        }
      }
      request.open('GET', fileName, true); // Create a request to acquire the file
      request.send();                      // Send the request
    }

    function onReadTxtFile(fileString, fileName) {
      //document.write(fileString);

      //let str = fileString.split('\n').join("<br/>");
      //document.write(str);

      const txtDoc = new TxtDoc(fileName);
      const strs = txtDoc.parse(fileString); // Parse the file
      //document.write(strs);
      document.body.innerHTML = strs;

      /*
      var lines = fileString.split('\n');  // Break up into lines and store them as array
      lines.push(null); // Append null
      var index = 0;    // Initialize index of line
      while ((line = lines[index++]) != null) {
      }
      */
    }
    readTxtFile('test.txt');
  </script>
</body>

</html>